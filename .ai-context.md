# Repository AI Context & Analysis

Repository: octez.connect-docs
Root: /Users/ajinkyaraj/trilitech/octez.connect-docs

Purpose
- This file documents an automated analysis of the repo: main files, what they do, and every place where the old Beacon package names or the string "beacon" (package scopes) appear. It is intended to guide a safe rename of packages from the old `@airgap/*` namespace and `beacon-*` names to the new `@tezos-x/octez.connect-*` namespace.

Top-level files and purpose
- `package.json`: project metadata and dev scripts. Includes a `create-node-modules` script that copies `@tezos-x/octez.connect-sdk` into `src/node_modules` for playground/demo purposes.
- `README.md`: documentation and scripts usage notes.
- `Migration-tips.md`: existing mapping / notes for package renames.
- `src/`: React/Docusaurus sources for the docs site (pages, docs, components, examples, theme overrides).
- `src/examples/`: many examples showing usage of Beacon SDKs (both `beacon` and `taquito` examples). Many imports reference `beacon-sdk` via node_modules paths.
- `src/docs/`: the documentation pages (mdx/md files) referencing `@airgap/*` packages heavily.
- `scripts/`: helper scripts for building the static demo, copying node_modules, and fixing local copies of the beacon SDK.

Places where the old Beacon package namespace or 'beacon' appear
- The project uses `@airgap/...` scoped packages widely. The most common scoped packages are `@tezos-x/octez.connect-sdk` and `@airgap/beacon-*` packages (dapp, core, types, ui, wallets, blockchains, transports, etc.).

Files containing `@airgap` or `beacon` package references (non-exhaustive list found by grep):
- `src/pages/playground.tsx`
- `src/utils.ts`
- `src/components/DAppTable.tsx`
- `src/components/RunnableCode.tsx`
- `src/examples/` (many .ts/.tsx example files - imports from node_modules/beacon-sdk/dist/cjs)
- `src/docs/getting-started/installation.mdx`
- `src/docs/getting-started/first-dapp.mdx`
- `src/docs/getting-started/simple-example.mdx`
- `src/docs/getting-started/*` (multiple guides)
- `src/docs/guides/*` (permission, sign-payload, network, migration-guide, etc.)
- `src/docs/advanced/*` (sdk-info, custom-block-explorer, ui-elements, different-node, etc.)
- `src/docs/blockchains/*` (introduction.md, usage.md)
- `package.json` (dependency: `@tezos-x/octez.connect-sdk` and `create-node-modules` script)
- `scripts/fix-beacon-sdk.js` (fixes paths for `@tezos-x/octez.connect-sdk` artifacts)
- `package-lock.json` contains a full dependency map referencing `@airgap/*` packages (do not manually edit generated lockfile unless regenerating)

Common patterns to update when renaming
- Scoped package references: `@airgap/beacon-<name>` -> `@tezos-x/octez.connect-<name>`
- Main SDK: `@tezos-x/octez.connect-sdk` -> `@tezos-x/octez.connect-sdk` (consumer imports like `import { DAppClient } from "@tezos-x/octez.connect-sdk"` should be updated)
- Unscoped `beacon-sdk` paths (used in `src/examples/*` via `../node_modules/beacon-sdk/dist/cjs`) -> `../node_modules/@tezos-x/octez.connect-sdk/dist/cjs` (or remove these local node_modules shims in favor of standard package imports)
- Script references that copy or patch `@tezos-x/octez.connect-sdk` artifacts -> update to `@tezos-x/octez.connect-sdk` and new artifact names.

Planned safe approach (recommended)
1. Add a migration guide in the docs (this repo) with exact package mapping and code examples for both package.json installs and runtime imports.
2. Replace package import strings in docs and examples (MDX and TS files) from `@airgap/...` to `@tezos-x/octez.connect-...` and `@tezos-x/octez.connect-sdk` to `@tezos-x/octez.connect-sdk`.
3. Update local scripts that copy or patch node_modules to reference the new package names.
4. Do not edit `package-lock.json` manually; instead update `package.json` and run `npm install` to regenerate lockfile.
5. Run the docs site locally to verify no build-time import/runtime errors: `npm run start` (or the project's usual Docusaurus dev command).

Quick mapping (from `Migration-tips.md` in repo)
- `beacon-blockchain-substrate`  -> `octez.connect-blockchain-substrate`
- `beacon-blockchain-tezos-sapling` -> `octez.connect-tezos-sapling`
- `beacon-blockchain-tezos` -> `octez.connect-blockchain-tezos`
- `beacon-core` -> `octez.connect-core`
- `beacon-dapp` -> `octez.connect-dapp`
- `beacon-sdk` -> `octez.connect-sdk`
- `beacon-transport-matrix` -> `octez.connect-transport-matrix`
- `beacon-transport-postmessage` -> `octez.connect-transport-postmessage`
- `beacon-transport-walletconnect` -> `octez.connect-transport-walletconnect`
- `beacon-types` -> `octez.connect-types`
- `beacon-ui` -> `octez.connect-ui`
- `beacon-utils` -> `octez.connect-utils`
- `beacon-wallet` -> `octez.connect-wallet`

IP / naming note
- This repository contains documentation originally referencing the Beacon project and `@airgap` packages. The site is hosted at docs.walletbeacon.io per repository notes. Changing package names in the documentation (and code examples) reduces direct use of the `Beacon`/`@airgap` brand, but renaming alone does not remove any possible trademark or copyright concerns. See `IP-rights-suggestions.md` for mitigation suggestions.

Appendix: full list of files with matches (generated by repo grep)
- A full list of matched files was produced during the scan and is available in the repo's search output. Key folders with matches: `src/docs`, `src/examples`, `src/components`, top-level `package.json`, `scripts/`.

Next steps
- I can (A) perform an automated, safe find-and-replace for scoped `@airgap/*` package names to `@tezos-x/octez.connect-*` in the `src/docs` and `src/examples` files and update scripts and `package.json`, or (B) produce a pull request patch with all replacements for review. Which do you prefer?

Recent learnings & current state
- Automated bulk edits were executed to rename Beacon-related packages to `@tezos-x/octez.connect-*` and to replace `@taquito/*` with `@tezos-x/octez.js-*` across docs, examples, and scripts.
- New files added during the session: `.ai-context.md`, `src/docs/guides/migrate-to-octez-connect.mdx`, and `IP-rights-suggestions.md`.
- A script was created and run to perform the `@taquito` → `@tezos-x/octez.js-*` replacements; many files were patched and `*.bak` backups were created alongside each edited file.
- Side-effect: `package-lock.json` was corrupted by over-reaching replacements. The corrupted lockfile was removed to avoid committing invalid state; do not restore it from the repo — regenerate after fixes.
- The user reverted a small number of doc edits and removed `package-lock.json`; verification and correction are now the priority.

Recommended conservative workflow (what we followed and will continue):
- Do a file-by-file verification of modified files by diffing each working file against its `.bak` (or git HEAD) and restore any unintended edits.
- Prefer targeted automated fixes that only touch known patterns (map corrupted tokens → canonical package names from `Migration-tips.md`).
- After all files are verified and corrected, run `npm install` to regenerate a clean `package-lock.json` and then remove `*.bak` files.
- Create a pull request summarizing: scope of renames, list of files changed, any manual fixes applied, and the regeneration of the lockfile.

Current actionable items (short):
- Verify and fix patched files using `.bak` backups (conservative auto-fix available — run only with approval).
- Regenerate `package-lock.json` after verification: `npm install`.
- Commit verified changes and open a PR for review.

If you want, I will now perform the conservative auto-fix using the canonical package list in `Migration-tips.md`, then produce a per-file report of any files that still contain suspicious tokens for manual review.

External references & supplied information
- Repository reference (attachment):
	- Owner: airgap-it
	- Repository: beacon-docs
	- Current branch: main
	- Default branch: main
- NPM packages/settings page (fetched during the session):
	- http://www.npmjs.com/settings/tezos-x/packages?page=0&perPage=100
- Migration canonical mapping provided in `Migration-tips.md` (local file) — includes authoritative package name list for `@tezos-x/octez.connect-*` and `@tezos-x/octez.js-*` packages.
- Session snapshot:
	- Date: 2026-01-30
	- Recent terminal actions: `git status --porcelain`, `find . -name "*.bak" -type f -delete`, and the `wget` call above to fetch the `tezos-x` npm packages page.

Use these external references as the authoritative sources when validating canonical package names and when regenerating `package-lock.json` after fixes.
